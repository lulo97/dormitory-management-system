@{
    Layout = "~/Views/Shared/DashboardLayout.cshtml";
}

@using Microsoft.AspNet.Identity

<script>
    app.controller('RoommateController', function ($scope, $http) {
            // Replace 'yourUsername' with the actual username
            var username = '@User.Identity.GetUserName()';

            $http.get('api/studentinroom/getAllRoommate?Username=' + username)
                .then(function (response) {
                    $scope.roommates = response.data;
                })
                .catch(function (error) {
                    console.error('Error fetching roommates:', error);
                });
        });
</script>

<div class="wrapper" ng-app="myApp" ng-controller="RoommateController">
    <div class="content-wrapper p-3">

        <div class="card card-primary">
            <div class="card-header">
                <h3 class="card-title">Room Information</h3>
            </div>
            <div class="card-body">
                <strong>RoomID:</strong> {{roommates[0].RoomID}}
            </div>
            <div class="card-body">
                <strong>RoomName:</strong> {{roommates[0].RoomName}}
            </div>
            <div class="card-body">
                <strong>BuildingID:</strong> {{roommates[0].BuildingId}}
            </div>
        </div>

        <div class="card" style="font-size:0.9rem;">
            <div class="card-header d-flex flex-col">
                <h3 class="card-title">Student In Room Table</h3>
            </div>
            <div class="card-body">
                <table class="table table-bordered">
                    <thead>
                        <tr>
                            <th>Student ID</th>
                            <th>Student Name</th>
                            <th>Class</th>
                            <th>Academic Year</th>
                            <th>DOB</th>
                            <th>Phone Number</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="roommate in roommates">
                            <td>{{ roommate.StudentID }}</td>
                            <td>{{ roommate.StudentName }}</td>
                            <td>{{ roommate.Class }}</td>
                            <td>{{ roommate.AcademicYear }}</td>
                            <td>{{ roommate.DOB | date:'yyyy-MM-dd' }}</td>
                            <td>{{ roommate.PhoneNumber }}</td>
                        </tr>
                    </tbody>
                </table>
                <div class="card-footer clearfix">
                    <!--
                    Pagination
                    total-items (int) = Total number of items to display
                    ng-model (int) = The current page index (1-based) among the available pages
                    items-per-page (int) = Number of items to display per page
                    -->
                    <ul class="m-0" uib-pagination total-items="totalItems" ng-model="currentPage" items-per-page="itemsPerPage" boundary-links="true" rotate="false"></ul>
                </div>
            </div>
        </div>
    </div>
</div>
